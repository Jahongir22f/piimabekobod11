<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - –£–º–Ω–∞—è —à–∫–æ–ª–∞</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar admin-nav">
        <div class="nav-brand">
            <h2>üõ†Ô∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h2>
        </div>
        <div class="nav-menu">
            <a href="#" onclick="showAdminSection('dashboard')" class="nav-link active">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="#" onclick="showAdminSection('chsb-manager')" class="nav-link">CHSB Manager</a>
            <a href="#" onclick="showAdminSection('question-editor')" class="nav-link">Question Editor</a>
            <a href="#" onclick="showAdminSection('media-manager')" class="nav-link">Media Manager</a>
            <a href="#" onclick="showAdminSection('results')" class="nav-link">Results Monitor</a>
            <a href="#" onclick="adminLogout()" class="nav-link logout">–í—ã—Ö–æ–¥</a>
        </div>
    </nav>

    <!-- –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞ -->
    <section id="admin-dashboard" class="section active">
        <div class="container">
            <div class="admin-welcome glass-container">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π</p>
            </div>

            <div class="admin-stats">
                <div class="stat-card glass-container">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-info">
                        <h3 id="totalStudents">0</h3>
                        <p>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤</p>
                    </div>
                </div>

                <div class="stat-card glass-container">
                    <div class="stat-icon">üìù</div>
                    <div class="stat-info">
                        <h3 id="totalQuestions">50</h3>
                        <p>–í–æ–ø—Ä–æ—Å–æ–≤ –≤ –±–∞–∑–µ CHSB</p>
                    </div>
                </div>

                <div class="stat-card glass-container">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <h3 id="totalTests">0</h3>
                        <p>–ü—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤</p>
                    </div>
                </div>

                <div class="stat-card glass-container">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-info">
                        <h3 id="avgScore">0%</h3>
                        <p>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</p>
                    </div>
                </div>
            </div>

            <div class="quick-actions glass-container">
                <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <div class="action-buttons">
                    <button onclick="showAdminSection('question-editor')" class="btn-primary">
                        üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã
                    </button>
                    <button onclick="generateAccessCode()" class="btn-secondary">
                        üîë –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞
                    </button>
                    <button onclick="showAdminSection('results')" class="btn-info">
                        üìä –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    </button>
                </div>
            </div>

            <div class="access-code-display" id="accessCodeDisplay" style="display: none;">
                <h4>–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ—Å—Ç—É:</h4>
                <div class="code-display">
                    <span id="generatedCode"></span>
                    <button onclick="copyCode()" class="btn-copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <p class="code-info">–≠—Ç–æ—Ç –∫–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞ —É—á–µ–Ω–∏–∫–∞–º–∏</p>
            </div>
        </div>
    </section>

    <!-- CHSB Manager -->
    <section id="chsb-manager" class="section">
        <div class="container">
            <h2>üìù CHSB Test Manager</h2>
            
            <div class="chsb-controls">
                <div class="filter-controls">
                    <select id="subjectFilter" onchange="filterQuestions()">
                        <option value="all">–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã</option>
                        <option value="algebra">–ê–ª–≥–µ–±—Ä–∞ (1-12)</option>
                        <option value="geometry">–ì–µ–æ–º–µ—Ç—Ä–∏—è (13-20)</option>
                        <option value="physics">–§–∏–∑–∏–∫–∞ (21-36)</option>
                        <option value="english">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π (37-50)</option>
                    </select>
                    
                    <button onclick="addNewQuestion()" class="btn-success">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                    <button onclick="exportQuestions()" class="btn-info">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
                    <button onclick="importQuestions()" class="btn-warning">üì§ –ò–º–ø–æ—Ä—Ç</button>
                </div>
            </div>

            <div class="questions-grid" id="questionsGrid">
                <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </section>

    <!-- Question Editor -->
    <section id="question-editor" class="section">
        <div class="container">
            <h2>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤</h2>
            
            <div class="editor-container">
                <div class="question-list">
                    <h3>–°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤</h3>
                    <div class="search-box">
                        <input type="text" id="questionSearch" placeholder="–ü–æ–∏—Å–∫ –≤–æ–ø—Ä–æ—Å–æ–≤..." oninput="searchQuestions()">
                    </div>
                    <div class="questions-list" id="questionsList">
                        <!-- –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ -->
                    </div>
                </div>

                <div class="question-form">
                    <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞</h3>
                    <form id="questionEditForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>–ù–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞</label>
                                <input type="number" id="questionNumber" min="1" max="50" required>
                            </div>
                            <div class="form-group">
                                <label>–ü—Ä–µ–¥–º–µ—Ç</label>
                                <select id="questionSubject" required>
                                    <option value="algebra">–ê–ª–≥–µ–±—Ä–∞</option>
                                    <option value="geometry">–ì–µ–æ–º–µ—Ç—Ä–∏—è</option>
                                    <option value="physics">–§–∏–∑–∏–∫–∞</option>
                                    <option value="english">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</label>
                            <textarea id="questionText" rows="3" required></textarea>
                        </div>

                        <div class="form-group">
                            <label>–§–æ—Ä–º—É–ª–∞ (LaTeX –∏–ª–∏ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç)</label>
                            <input type="text" id="questionFormula" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2x + 5 = 15">
                        </div>

                        <div class="answers-section">
                            <h4>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤</h4>
                            <div class="form-group">
                                <label>A)</label>
                                <input type="text" id="optionA" required>
                            </div>
                            <div class="form-group">
                                <label>B)</label>
                                <input type="text" id="optionB" required>
                            </div>
                            <div class="form-group">
                                <label>C)</label>
                                <input type="text" id="optionC" required>
                            </div>
                            <div class="form-group">
                                <label>D)</label>
                                <input type="text" id="optionD" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</label>
                            <select id="correctAnswer" required>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>–ü–æ—è—Å–Ω–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                            <textarea id="questionExplanation" rows="2"></textarea>
                        </div>

                        <div class="form-group">
                            <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                            <input type="file" id="questionImage" accept="image/*" onchange="previewImage()">
                            <div class="image-preview" id="imagePreview" style="display: none;">
                                <img id="previewImg" src="" alt="–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä">
                                <button type="button" onclick="removeImage()" class="btn-remove">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                            <button type="button" onclick="resetForm()" class="btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                            <button type="button" onclick="deleteQuestion()" class="btn-danger">–£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Media Manager -->
    <section id="media-manager" class="section">
        <div class="container">
            <h2>üñºÔ∏è –ú–µ–Ω–µ–¥–∂–µ—Ä –º–µ–¥–∏–∞</h2>
            
            <div class="media-upload">
                <div class="upload-area" onclick="document.getElementById('mediaUpload').click()">
                    <div class="upload-icon">üìÅ</div>
                    <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</p>
                    <input type="file" id="mediaUpload" multiple accept="image/*" style="display: none;" onchange="uploadMedia()">
                </div>
            </div>

            <div class="media-gallery" id="mediaGallery">
                <!-- –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
            </div>
        </div>
    </section>

    <!-- Results Monitor -->
    <section id="results" class="section">
        <div class="container">
            <h2>üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h2>
            
            <div class="results-filters">
                <select id="studentFilter" onchange="filterResults()">
                    <option value="all">–í—Å–µ —É—á–µ–Ω–∏–∫–∏</option>
                </select>
                
                <select id="dateFilter" onchange="filterResults()">
                    <option value="all">–í—Å–µ –¥–∞—Ç—ã</option>
                    <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                    <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                    <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                </select>
            </div>

            <div class="results-table">
                <table id="resultsTable">
                    <thead>
                        <tr>
                            <th>–£—á–µ–Ω–∏–∫</th>
                            <th>–ö–ª–∞—Å—Å</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–û–±—â–∏–π –±–∞–ª–ª</th>
                            <th>–ê–ª–≥–µ–±—Ä–∞</th>
                            <th>–ì–µ–æ–º–µ—Ç—Ä–∏—è</th>
                            <th>–§–∏–∑–∏–∫–∞</th>
                            <th>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</th>
                            <th>–í—Ä–µ–º—è</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="resultsTableBody">
                        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </tbody>
                </table>
            </div>

            <div class="results-analytics">
                <h3>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h4>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º</h4>
                        <div class="subject-analytics">
                            <div class="subject-stat">
                                <span>–ê–ª–≥–µ–±—Ä–∞:</span>
                                <span id="avgAlgebra">0%</span>
                            </div>
                            <div class="subject-stat">
                                <span>–ì–µ–æ–º–µ—Ç—Ä–∏—è:</span>
                                <span id="avgGeometry">0%</span>
                            </div>
                            <div class="subject-stat">
                                <span>–§–∏–∑–∏–∫–∞:</span>
                                <span id="avgPhysics">0%</span>
                            </div>
                            <div class="subject-stat">
                                <span>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π:</span>
                                <span id="avgEnglish">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª–∞—Å—Å–∞–º</h4>
                        <div id="classStats">
                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª–∞—Å—Å–∞–º -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div id="confirmModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <p id="confirmMessage"></p>
            <div class="modal-buttons">
                <button onclick="confirmAction()" class="btn-danger">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                <button onclick="closeModal()" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>